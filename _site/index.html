<html>
<head>
  <link rel="stylesheet" href="css/app.css">
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Mite &ndash; Pure SQL Migration Utility</title>
</head>
<body>

  <div class="row" id="content">
    <div class="col-sm-3 side-nav hidden-xs">
      <ul class="nav">
        <li><a href="#home">Home</a></li>
        <li><a href="#tenets">Tenets of Mite</a></li>
        <li><a href="#installation">Installing Mite</a></li>
        <li><a href="#getting-started">Getting Started</a></li>
        <li><a href="#first-migration">Your first migration</a></li>
        <li><a href="#configuration">Configuration</a></li>
        <li><a href="#commands">Commands</a></li>

        <li><a href="#license">License</a></li>
      </ul>
    </div>
    <div class="col-sm-6 col-xs-10 col-xs-offset-1">
      <div class="row">
  <div class="col-md-3 col-xs-5">
    <img src="img/mite.png" alt="Mite logo" class="logo">
  </div>
  <div class="col-md-9 col-xs-7">
    <h1 id="home">Mite <br><small>A Migration Utility</small></h1>
  </div>
</div>

<p class="lead">The goal of Mite is to make database migrations so simple and painless that doing migrations is easier than not doing them.</p>

<a class="cta" href="https://github.com/jdc0589/mite-node">Check out the GitHub repo &rarr;</a>

<hr>

<h2 id="tenets">Tenets of Mite</h2>

<ul>
  <li>SQL is a perfectly good DSL (Domain-Specific Language).</li>
  <li>Developers know and have tools for SQL.</li>
  <li>Down migrations are required for expected behavior on conflict resolution.</li>
  <li>Order is significant in migrations and is enforced.</li>
  <li>Migrations should be language agonostic. So a utility is appropriate.</li>
  <li>Database consistency with the migrations should be enforced. We should be aware of altered migrations.</li>
</ul>

<hr>

<h2 id="installation">Installation</h3>
<p>You know the drill: <kbd>npm install -g mite</kbd></p>

<hr>

<h2 id="getting-started">Getting Started</h2>

<h3 id="new-project">For new projects: </h3>

<p>First, copy the <a href="https://raw.github.com/jdc0589/mite-node/master/mite.example">example configuration</a> in to the root of your project (usually the source control root), and name the file <kbd class="code">mite.config</kbd>. It looks something like this:</p>
<pre>
  {
    "database": "mitedevel",
    "host": "localhost",
    "user": "whiteboard",
    "password": "webuildapps",
    "dialect": "mysql",
    "port": 3306,
    "migrationExtension": ".sql"
  }
</pre>

<p>Once you've modified the settings to match your environment, run <kbd>mite init</kbd>. This will automatically create your <kbd class="code">migrations</kbd> directory and initialize the <kbd class="code">_migration</kbd> table in your database.</p>

<p>For more information, refer to the <a href="#configuration">Configuration</a> section. At some point this will be part of <kbd>mite init</kbd>, but we aren't quite there yet.</p>


<p>Got it? Proceed to <a href="#first-migration">writing your first migration</a>.</p>

<hr>

<h2 id="first-migration">Writing your first migration</h2>
<p>Migrations with Mite are literally just SQL (well, with some comments).</p>

<p>Once Mite is initialized, run <kbd>mite create</kbd>. This will create a template for your first migration in <kbd class="code">migrations</kbd>, identified by a timestamp. Open the new file up, and after the <kbd class="code">/* mite:up */</kbd> comment add some statements to create a new table/tables. After the <kbd class="code">/* mite:down */</kbd> comment, add statements to rollback anything done in the <kbd class="code">up</kbd> section (usually drop table statements).</p>

<pre>
  /* mite:up */
  CREATE TABLE mite_example (id char(36));

  /* mite:down */
  drop table mite_example
</pre>

<p>Next, run <kbd>mite status</kbd>. It should tell you there is an unexecuted migration. This means you have some migrations defined on disk that haven't been executed yet.</p>

<p>Running <kbd>mite up</kbd> will execute any unexecuted migrations. New tables defined in the up section of your first migration should now exist in your database, and a subsequent call to <kbd>mite status</kbd> should report that the state is clean.</p>

<p>Thats it! You just set up Mite and created &amp; ran your first migration.</p>

<h2 id="configuration">Configuration</h2>
<p>Your <kbd class="code">mite.config</kbd> file is where Mite will look for various configuration details. Here are the options currently supported:</p>

<ul>
  <li><strong>database</strong> &mdash; the database name for your project</li>
  <li><strong>host</strong> &mdash; the host of your database server</li>
  <li><strong>user</strong> &mdash; the user name with read, write, create, and drop privileges for your database</li>
  <li><strong>password</strong> &mdash; the password for the specified user</li>
  <li><strong>dialect</strong> &mdash; the sql dialect for the mite project.</li>
  <li><strong>port</strong> &mdash; the port for your database server</li>
</ul>

<h2 id="commands">Command interface</h2>
<p>Mite uses a lot of git-style commands and subcommands. You can execute Mite commands from anywhere within a Mite project, even in subdirectories. <kbd>mite help</kbd> or <kbd>mite help [command]</kbd> will always give you usage information.</p>

<ul>
  <li><kbd>version</kbd> &mdash; display the current version of mite.</li>
  <li><kbd>status</kbd> &mdash; display the migration status. the status can be clean, unexecuted, or dirty.</li>
  <li><kbd>init</kbd> &mdash; create the migrations directory and initialize the _migration table in your database.</li>
  <li><kbd>create</kbd> &mdash; create a new empty migration in the migrations/ directory.</li>
  <li><kbd>up</kbd> &mdash; run any unexecuted migrations. The status must not be dirty prior to runing mite up</li>
  <li><kbd>stepup</kbd> &mdash; run the first unexecuted migration</li>
  <li><kbd>down</kbd> &mdash; run the down migrations from the current head all the way down to the first migration. This is destructive and should never be run in a production environment.</li>
  <li><kbd>stepdown</kbd> &mdash; run the down of the last executed migration. This is destructive and should never be run in a production environment.</li>
  <li><kbd>help</kbd> &mdash; print usage information</li>
  <li><kbd>help [command]</kbd> &mdash; print usage information for a specific command</li>
</ul>

<p>Full documentation is available <a href="https://github.com/jdc0589/mite-node">on GitHub</a>.</p>

<hr>

<h2 id="license">The MIT License</h2>
<div class="license">
<p>Copyright &copy; 2011 Whiteboard-IT LLC</p>

<p>Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the "Software"), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions:</p>

<p>The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.</p>

<p>THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.</p>
</div>
    </div>
  </div>

  <div class="footer">
    <div class="copy">
      <p>Copyright &copy; 2011 Whiteboard-IT LLC</p>
    </div>
  </div>
  
  <script src="js/build.js"></script>

  <a href="https://github.com/jdc0589/mite-node"><img style="position: fixed; top: 0; right: 0; border: 0;" src="img/forkme.png" alt="Fork me on GitHub" data-canonical-src="https://s3.amazonaws.com/github/ribbons/forkme_right_green_007200.png"></a>

  <!-- Dev mode scripts (unminified) -->
  <!-- <script src="js/components.js"></script>
  <script src="js/app.js"></script>-->
</body>
</html>
